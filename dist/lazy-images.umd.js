!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self)["lazy-images"]=t["lazy-images"]||{},t["lazy-images"].js=e())}(this,function(){"use strict";(function(t){!function(e,n){var i=function(t,e,n){var i,a;if(function(){var e,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in a=t.lazySizesConfig||t.lazysizesConfig||{},n)e in a||(a[e]=n[e])}(),!e||!e.getElementsByClassName)return{init:function(){},cfg:a,noSupport:!0};var r=e.documentElement,s=t.HTMLPictureElement,o=t.addEventListener.bind(t),l=t.setTimeout,u=t.requestAnimationFrame||l,c=t.requestIdleCallback,d=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],g={},y=Array.prototype.forEach,h=function(t,e){return g[e]||(g[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),g[e].test(t.getAttribute("class")||"")&&g[e]},m=function(t,e){h(t,e)||t.setAttribute("class",(t.getAttribute("class")||"").trim()+" "+e)},v=function(t,e){var n;(n=h(t,e))&&t.setAttribute("class",(t.getAttribute("class")||"").replace(n," "))},b=function t(e,n,i){var a=i?"addEventListener":"removeEventListener";i&&t(e,n),f.forEach(function(t){e[a](t,n)})},p=function(t,n,a,r,s){var o=e.createEvent("Event");return a||(a={}),a.instance=i,o.initEvent(n,!r,!s),o.detail=a,t.dispatchEvent(o),o},A=function(e,n){var i;!s&&(i=t.picturefill||a.pf)?(n&&n.src&&!e.getAttribute("srcset")&&e.setAttribute("srcset",n.src),i({reevaluate:!0,elements:[e]})):n&&n.src&&(e.src=n.src)},z=function(t,e){return(getComputedStyle(t,null)||{})[e]},C=function(t,e,n){for(n=n||t.offsetWidth;n<a.minSize&&e&&!t._lazysizesWidth;)n=e.offsetWidth,e=e.parentNode;return n},E=(R=[],T=[],U=R,k=function(){var t=U;for(U=R.length?T:R,j=!0,B=!1;t.length;)t.shift()();j=!1},H=function(t,n){j&&!n?t.apply(this,arguments):(U.push(t),B||(B=!0,(e.hidden?l:u)(k)))},H._lsFlush=k,H),w=function(t,e){return e?function(){E(t)}:function(){var e=this,n=arguments;E(function(){t.apply(e,n)})}},N=function(t){var e,i,a=function(){e=null,t()},r=function t(){var e=n.now()-i;e<99?l(t,99-e):(c||a)(a)};return function(){i=n.now(),e||(e=l(r,99))}},_=function(){var s,f,g,C,_,W,x,M,S,q,j,B,R,T,U,k,H,O,D,F=/^img$/i,P=/^iframe$/i,I="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),$=0,J=0,X=-1,G=function(t){J--,(!t||J<0||!t.target)&&(J=0)},Q=function(t){return null==B&&(B="hidden"==z(e.body,"visibility")),B||!("hidden"==z(t.parentNode,"visibility")&&"hidden"==z(t,"visibility"))},V=function(t,n){var i,a=t,s=Q(t);for(M-=n,j+=n,S-=n,q+=n;s&&(a=a.offsetParent)&&a!=e.body&&a!=r;)(s=(z(a,"opacity")||1)>0)&&"visible"!=z(a,"overflow")&&(i=a.getBoundingClientRect(),s=q>i.left&&S<i.right&&j>i.top-1&&M<i.bottom+1);return s},Y=function(){var t,n,o,l,u,c,d,g,y,h,m,v,b=i.elements;if((C=a.loadMode)&&J<8&&(t=b.length)){for(n=0,X++;n<t;n++)if(b[n]&&!b[n]._lazyRace)if(!I||i.prematureUnveil&&i.prematureUnveil(b[n]))at(b[n]);else if((g=b[n].getAttribute("data-expand"))&&(c=1*g)||(c=$),h||(h=!a.expand||a.expand<1?r.clientHeight>500&&r.clientWidth>500?500:370:a.expand,i._defEx=h,m=h*a.expFactor,v=a.hFac,B=null,$<m&&J<1&&X>2&&C>2&&!e.hidden?($=m,X=0):$=C>1&&X>1&&J<6?h:0),y!==c&&(W=innerWidth+c*v,x=innerHeight+c,d=-1*c,y=c),o=b[n].getBoundingClientRect(),(j=o.bottom)>=d&&(M=o.top)<=x&&(q=o.right)>=d*v&&(S=o.left)<=W&&(j||q||S||M)&&(a.loadHidden||Q(b[n]))&&(f&&J<3&&!g&&(C<3||X<4)||V(b[n],c))){if(at(b[n]),u=!0,J>9)break}else!u&&f&&!l&&J<4&&X<4&&C>2&&(s[0]||a.preloadAfterLoad)&&(s[0]||!g&&(j||q||S||M||"auto"!=b[n].getAttribute(a.sizesAttr)))&&(l=s[0]||b[n]);l&&!u&&at(l)}},K=(R=Y,U=0,k=a.throttleDelay,H=a.ricTimeout,O=function(){T=!1,U=n.now(),R()},D=c&&H>49?function(){c(O,{timeout:H}),H!==a.ricTimeout&&(H=a.ricTimeout)}:w(function(){l(O)},!0),function(t){var e;(t=!0===t)&&(H=33),T||(T=!0,(e=k-(n.now()-U))<0&&(e=0),t||e<9?D():l(D,e))}),Z=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(G(t),m(e,a.loadedClass),v(e,a.loadingClass),b(e,et),p(e,"lazyloaded"))},tt=w(Z),et=function(t){tt({target:t.target})},nt=function(t){var e,n=t.getAttribute(a.srcsetAttr);(e=a.customMedia[t.getAttribute("data-media")||t.getAttribute("media")])&&t.setAttribute("media",e),n&&t.setAttribute("srcset",n)},it=w(function(t,e,n,i,r){var s,o,u,c,f,h;(f=p(t,"lazybeforeunveil",e)).defaultPrevented||(i&&(n?m(t,a.autosizesClass):t.setAttribute("sizes",i)),o=t.getAttribute(a.srcsetAttr),s=t.getAttribute(a.srcAttr),r&&(u=t.parentNode,c=u&&d.test(u.nodeName||"")),h=e.firesLoad||"src"in t&&(o||s||c),f={target:t},m(t,a.loadingClass),h&&(clearTimeout(g),g=l(G,2500),b(t,et,!0)),c&&y.call(u.getElementsByTagName("source"),nt),o?t.setAttribute("srcset",o):s&&!c&&(P.test(t.nodeName)?function(t,e){try{t.contentWindow.location.replace(e)}catch(n){t.src=e}}(t,s):t.src=s),r&&(o||c)&&A(t,{src:s})),t._lazyRace&&delete t._lazyRace,v(t,a.lazyClass),E(function(){var e=t.complete&&t.naturalWidth>1;h&&!e||(e&&m(t,"ls-is-cached"),Z(f),t._lazyCache=!0,l(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&J--},!0)}),at=function(t){if(!t._lazyRace){var e,n=F.test(t.nodeName),i=n&&(t.getAttribute(a.sizesAttr)||t.getAttribute("sizes")),r="auto"==i;(!r&&f||!n||!t.getAttribute("src")&&!t.srcset||t.complete||h(t,a.errorClass)||!h(t,a.lazyClass))&&(e=p(t,"lazyunveilread").detail,r&&L.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,J++,it(t,e,r,i,n))}},rt=N(function(){a.loadMode=3,K()}),st=function(){3==a.loadMode&&(a.loadMode=2),rt()},ot=function t(){f||(n.now()-_<999?l(t,999):(f=!0,a.loadMode=3,K(),o("scroll",st,!0)))};return{_:function(){_=n.now(),i.elements=e.getElementsByClassName(a.lazyClass),s=e.getElementsByClassName(a.lazyClass+" "+a.preloadClass),o("scroll",K,!0),o("resize",K,!0),o("pageshow",function(t){if(t.persisted){var n=e.querySelectorAll("."+a.loadingClass);n.length&&n.forEach&&u(function(){n.forEach(function(t){t.complete&&at(t)})})}}),t.MutationObserver?new MutationObserver(K).observe(r,{childList:!0,subtree:!0,attributes:!0}):(r.addEventListener("DOMNodeInserted",K,!0),r.addEventListener("DOMAttrModified",K,!0),setInterval(K,999)),o("hashchange",K,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){e.addEventListener(t,K,!0)}),/d$|^c/.test(e.readyState)?ot():(o("load",ot),e.addEventListener("DOMContentLoaded",K),l(ot,2e4)),i.elements.length?(Y(),E._lsFlush()):K()},checkElems:K,unveil:at,_aLSL:st}}(),L=(M=w(function(t,e,n,i){var a,r,s;if(t._lazysizesWidth=i,i+="px",t.setAttribute("sizes",i),d.test(e.nodeName||""))for(a=e.getElementsByTagName("source"),r=0,s=a.length;r<s;r++)a[r].setAttribute("sizes",i);n.detail.dataAttr||A(t,n.detail)}),S=function(t,e,n){var i,a=t.parentNode;a&&(n=C(t,a,n),(i=p(t,"lazybeforesizes",{width:n,dataAttr:!!e})).defaultPrevented||(n=i.detail.width)&&n!==t._lazysizesWidth&&M(t,a,i,n))},q=N(function(){var t,e=x.length;if(e)for(t=0;t<e;t++)S(x[t])}),{_:function(){x=e.getElementsByClassName(a.autosizesClass),o("resize",q)},checkElems:q,updateElem:S}),W=function t(){!t.i&&e.getElementsByClassName&&(t.i=!0,L._(),_._())};var x,M,S,q;var j,B,R,T,U,k,H;return l(function(){a.init&&W()}),i={cfg:a,autoSizer:L,loader:_,init:W,uP:A,aC:m,rC:v,hC:h,fire:p,gW:C,rAF:E}}(e,e.document,Date);e.lazySizes=i,t.exports&&(t.exports=i)}("undefined"!=typeof window?window:{})})(t={exports:{}},t.exports);var t,e=function(){function t(t){return t.indexOf("?")>-1?"&":"?"}function e(e,n){if(n){var i=JSON.parse(n);Object.keys(i).forEach(function(n){e+=null!==i[n]?t(e)+n+"="+i[n]:""})}return e}return{queryUrl:e,getUrl:function(n){var i=n.getAttribute("data-src"),a=n.getAttribute("data-height-ratio"),r=n.parentNode.innerWidth||n.parentNode.offsetWidth;if(r=null!==r?r+50-r%50:null,!a){var s=n.parentNode.innerHeight||n.parentNode.offsetHeight;a=(s=null!==s?s+50-s%50:null)/r}var o=r,l=o*a;return i+=o?t(i)+"width="+o:"",i=e(i+=null!==l?t(i)+"height="+l:"",n.getAttribute("data-query-obj"))}}},n=0;function i(t){var e=new Image;e.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",e.onload=e.onerror=function(){t(2===e.height)}}function a(t){if(t.includes("format="))return t;var e=t.split("?");return"".concat(e[0],"?format=webp&").concat(e[1])}return function t(r){var s=r.includeWebp,o=void 0===s||s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.includeWebp=o,this.lazyLoad=function(t){t.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})};var n=this.includeWebp,r=t.target,s=r.classList.contains("lazyload-measure")||r.classList.contains("lazyload-bg"),o=r.classList.contains("lazyload-measure"),l=r.hasAttribute("data-srcset")&&r.hasAttribute("data-query-obj"),u=r.hasAttribute("data-src")&&r.hasAttribute("data-query-obj");if(s&&t.preventDefault(),o){var c=r.classList.contains("lazyload-bg"),d=e().getUrl(r);i(function(t){t&&n&&(d=a(d)),c?(r.parentNode.style.backgroundImage="url(".concat(d,")"),r.style.visibility="hidden"):r.src=d})}else if(l){var f=r.getAttribute("data-query-obj"),g=r.getAttribute("data-srcset").split(","),y=r.getAttribute("data-src"),h=[];i(function(t){g.forEach(function(i){var r=(i=(i=i.trim()).split(" "))[0],s=i[1],o=e().queryUrl(r,f);t&&n&&(o=a(o)),h.push(o+" "+s)}),r.setAttribute("srcset",h.join(", ")),r.setAttribute("src",e().queryUrl(y,f))})}else if(u){var m=r.getAttribute("data-query-obj"),v=r.getAttribute("data-src"),b=e().queryUrl(v,m);r.setAttribute("src",b)}},this.checkImages=function(){if(window.innerWidth>n+50||window.innerWidth<n-50){var t=Array.prototype.slice.call(document.body.querySelectorAll(".lazyloaded"));t.length>0&&t.map(function(t){t.classList.remove("lazyloaded"),t.classList.add("lazyload")}),n=window.innerWidth}}}});
