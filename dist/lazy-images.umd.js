!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):((t=t||self)["lazy-images"]=t["lazy-images"]||{},t["lazy-images"].js=e())}(this,function(){"use strict";(function(t){!function(e,n){var i=function(t,e){var n,i;if(function(){var e,n={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in i=t.lazySizesConfig||t.lazysizesConfig||{},n)e in i||(i[e]=n[e])}(),!e||!e.getElementsByClassName)return{init:function(){},cfg:i,noSupport:!0};var a=e.documentElement,r=t.Date,s=t.HTMLPictureElement,o=t.addEventListener,l=t.setTimeout,u=t.requestAnimationFrame||l,c=t.requestIdleCallback,d=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],y={},g=Array.prototype.forEach,h=function(t,e){return y[e]||(y[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),y[e].test(t.getAttribute("class")||"")&&y[e]},m=function(t,e){h(t,e)||t.setAttribute("class",(t.getAttribute("class")||"").trim()+" "+e)},b=function(t,e){var n;(n=h(t,e))&&t.setAttribute("class",(t.getAttribute("class")||"").replace(n," "))},v=function t(e,n,i){var a=i?"addEventListener":"removeEventListener";i&&t(e,n),f.forEach(function(t){e[a](t,n)})},p=function(t,i,a,r,s){var o=e.createEvent("Event");return a||(a={}),a.instance=n,o.initEvent(i,!r,!s),o.detail=a,t.dispatchEvent(o),o},A=function(e,n){var a;!s&&(a=t.picturefill||i.pf)?(n&&n.src&&!e.getAttribute("srcset")&&e.setAttribute("srcset",n.src),a({reevaluate:!0,elements:[e]})):n&&n.src&&(e.src=n.src)},z=function(t,e){return(getComputedStyle(t,null)||{})[e]},C=function(t,e,n){for(n=n||t.offsetWidth;n<i.minSize&&e&&!t._lazysizesWidth;)n=e.offsetWidth,e=e.parentNode;return n},w=(R=[],T=[],U=R,k=function(){var t=U;for(U=R.length?T:R,q=!0,B=!1;t.length;)t.shift()();q=!1},H=function(t,n){q&&!n?t.apply(this,arguments):(U.push(t),B||(B=!0,(e.hidden?l:u)(k)))},H._lsFlush=k,H),E=function(t,e){return e?function(){w(t)}:function(){var e=this,n=arguments;w(function(){t.apply(e,n)})}},N=function(t){var e,n,i=function(){e=null,t()},a=function t(){var e=r.now()-n;e<99?l(t,99-e):(c||i)(i)};return function(){n=r.now(),e||(e=l(a,99))}},_=function(){var s,u,f,y,C,_,W,x,M,S,j,q,B,R,T,U,k,H,O,D=/^img$/i,F=/^iframe$/i,P="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),I=0,$=0,J=-1,X=function(t){$--,(!t||$<0||!t.target)&&($=0)},G=function(t){return null==q&&(q="hidden"==z(e.body,"visibility")),q||"hidden"!=z(t.parentNode,"visibility")&&"hidden"!=z(t,"visibility")},Q=function(t,n){var i,r=t,s=G(t);for(x-=n,j+=n,M-=n,S+=n;s&&(r=r.offsetParent)&&r!=e.body&&r!=a;)(s=(z(r,"opacity")||1)>0)&&"visible"!=z(r,"overflow")&&(i=r.getBoundingClientRect(),s=S>i.left&&M<i.right&&j>i.top-1&&x<i.bottom+1);return s},V=function(){var t,r,o,l,c,d,f,g,h,m,b,v,p=n.elements;if((y=i.loadMode)&&$<8&&(t=p.length)){for(r=0,J++;r<t;r++)if(p[r]&&!p[r]._lazyRace)if(!P||n.prematureUnveil&&n.prematureUnveil(p[r]))it(p[r]);else if((g=p[r].getAttribute("data-expand"))&&(d=1*g)||(d=I),m||(m=!i.expand||i.expand<1?a.clientHeight>500&&a.clientWidth>500?500:370:i.expand,n._defEx=m,b=m*i.expFactor,v=i.hFac,q=null,I<b&&$<1&&J>2&&y>2&&!e.hidden?(I=b,J=0):I=y>1&&J>1&&$<6?m:0),h!==d&&(_=innerWidth+d*v,W=innerHeight+d,f=-1*d,h=d),o=p[r].getBoundingClientRect(),(j=o.bottom)>=f&&(x=o.top)<=W&&(S=o.right)>=f*v&&(M=o.left)<=_&&(j||S||M||x)&&(i.loadHidden||G(p[r]))&&(u&&$<3&&!g&&(y<3||J<4)||Q(p[r],d))){if(it(p[r]),c=!0,$>9)break}else!c&&u&&!l&&$<4&&J<4&&y>2&&(s[0]||i.preloadAfterLoad)&&(s[0]||!g&&(j||S||M||x||"auto"!=p[r].getAttribute(i.sizesAttr)))&&(l=s[0]||p[r]);l&&!c&&it(l)}},Y=(B=V,T=0,U=i.throttleDelay,k=i.ricTimeout,H=function(){R=!1,T=r.now(),B()},O=c&&k>49?function(){c(H,{timeout:k}),k!==i.ricTimeout&&(k=i.ricTimeout)}:E(function(){l(H)},!0),function(t){var e;(t=!0===t)&&(k=33),R||(R=!0,(e=U-(r.now()-T))<0&&(e=0),t||e<9?O():l(O,e))}),K=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(X(t),m(e,i.loadedClass),b(e,i.loadingClass),v(e,tt),p(e,"lazyloaded"))},Z=E(K),tt=function(t){Z({target:t.target})},et=function(t){var e,n=t.getAttribute(i.srcsetAttr);(e=i.customMedia[t.getAttribute("data-media")||t.getAttribute("media")])&&t.setAttribute("media",e),n&&t.setAttribute("srcset",n)},nt=E(function(t,e,n,a,r){var s,o,u,c,y,h;(y=p(t,"lazybeforeunveil",e)).defaultPrevented||(a&&(n?m(t,i.autosizesClass):t.setAttribute("sizes",a)),o=t.getAttribute(i.srcsetAttr),s=t.getAttribute(i.srcAttr),r&&(u=t.parentNode,c=u&&d.test(u.nodeName||"")),h=e.firesLoad||"src"in t&&(o||s||c),y={target:t},m(t,i.loadingClass),h&&(clearTimeout(f),f=l(X,2500),v(t,tt,!0)),c&&g.call(u.getElementsByTagName("source"),et),o?t.setAttribute("srcset",o):s&&!c&&(F.test(t.nodeName)?function(t,e){try{t.contentWindow.location.replace(e)}catch(n){t.src=e}}(t,s):t.src=s),r&&(o||c)&&A(t,{src:s})),t._lazyRace&&delete t._lazyRace,b(t,i.lazyClass),w(function(){var e=t.complete&&t.naturalWidth>1;h&&!e||(e&&m(t,"ls-is-cached"),K(y),t._lazyCache=!0,l(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&$--},!0)}),it=function(t){if(!t._lazyRace){var e,n=D.test(t.nodeName),a=n&&(t.getAttribute(i.sizesAttr)||t.getAttribute("sizes")),r="auto"==a;(!r&&u||!n||!t.getAttribute("src")&&!t.srcset||t.complete||h(t,i.errorClass)||!h(t,i.lazyClass))&&(e=p(t,"lazyunveilread").detail,r&&L.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,$++,nt(t,e,r,a,n))}},at=N(function(){i.loadMode=3,Y()}),rt=function(){3==i.loadMode&&(i.loadMode=2),at()},st=function t(){u||(r.now()-C<999?l(t,999):(u=!0,i.loadMode=3,Y(),o("scroll",rt,!0)))};return{_:function(){C=r.now(),n.elements=e.getElementsByClassName(i.lazyClass),s=e.getElementsByClassName(i.lazyClass+" "+i.preloadClass),o("scroll",Y,!0),o("resize",Y,!0),t.MutationObserver?new MutationObserver(Y).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a.addEventListener("DOMNodeInserted",Y,!0),a.addEventListener("DOMAttrModified",Y,!0),setInterval(Y,999)),o("hashchange",Y,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){e.addEventListener(t,Y,!0)}),/d$|^c/.test(e.readyState)?st():(o("load",st),e.addEventListener("DOMContentLoaded",Y),l(st,2e4)),n.elements.length?(V(),w._lsFlush()):Y()},checkElems:Y,unveil:it,_aLSL:rt}}(),L=(M=E(function(t,e,n,i){var a,r,s;if(t._lazysizesWidth=i,i+="px",t.setAttribute("sizes",i),d.test(e.nodeName||""))for(a=e.getElementsByTagName("source"),r=0,s=a.length;r<s;r++)a[r].setAttribute("sizes",i);n.detail.dataAttr||A(t,n.detail)}),S=function(t,e,n){var i,a=t.parentNode;a&&(n=C(t,a,n),(i=p(t,"lazybeforesizes",{width:n,dataAttr:!!e})).defaultPrevented||(n=i.detail.width)&&n!==t._lazysizesWidth&&M(t,a,i,n))},j=N(function(){var t,e=x.length;if(e)for(t=0;t<e;t++)S(x[t])}),{_:function(){x=e.getElementsByClassName(i.autosizesClass),o("resize",j)},checkElems:j,updateElem:S}),W=function t(){!t.i&&e.getElementsByClassName&&(t.i=!0,L._(),_._())};var x,M,S,j;var q,B,R,T,U,k,H;return l(function(){i.init&&W()}),n={cfg:i,autoSizer:L,loader:_,init:W,uP:A,aC:m,rC:b,hC:h,fire:p,gW:C,rAF:w}}(e,e.document);e.lazySizes=i,t.exports&&(t.exports=i)}("undefined"!=typeof window?window:{})})(t={exports:{}},t.exports);var t,e=function(){function t(t){return t.indexOf("?")>-1?"&":"?"}function e(e,n){if(n){var i=JSON.parse(n);Object.keys(i).forEach(function(n){e+=null!==i[n]?t(e)+n+"="+i[n]:""})}return e}return{queryUrl:e,getUrl:function(n){var i=n.getAttribute("data-src"),a=n.getAttribute("data-height-ratio"),r=n.parentNode.innerWidth||n.parentNode.offsetWidth;if(r=null!==r?r+50-r%50:null,!a){var s=n.parentNode.innerHeight||n.parentNode.offsetHeight;a=(s=null!==s?s+50-s%50:null)/r}var o=r,l=o*a;return i+=o?t(i)+"width="+o:"",i=e(i+=null!==l?t(i)+"height="+l:"",n.getAttribute("data-query-obj"))}}},n=0;function i(t){var e=new Image;e.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",e.onload=e.onerror=function(){t(2===e.height)}}return function t(a){var r=a.includeWebp,s=void 0===r||r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.includeWebp=s,this.lazyLoad=function(t){t.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})};var n=this.includeWebp,a=t.target,r=a.classList.contains("lazyload-measure")||a.classList.contains("lazyload-bg"),s=a.classList.contains("lazyload-measure"),o=a.hasAttribute("data-srcset")&&a.hasAttribute("data-query-obj"),l=a.hasAttribute("data-src")&&a.hasAttribute("data-query-obj");if(r&&t.preventDefault(),s){var u=a.classList.contains("lazyload-bg"),c=e().getUrl(a);i(function(t){t&&n&&(c+="&format=webp"),u?(a.parentNode.style.backgroundImage="url("+c+")",a.style.visibility="hidden"):a.src=c})}else if(o){var d=a.getAttribute("data-query-obj"),f=a.getAttribute("data-srcset").split(","),y=a.getAttribute("data-src"),g=[];i(function(t){f.forEach(function(i){var a=(i=(i=i.trim()).split(" "))[0],r=i[1],s=e().queryUrl(a,d);t&&n&&(a+="&format=webp"),g.push(s+" "+r)}),t&&n&&(y+="&format=webp"),a.setAttribute("srcset",g.join(", ")),a.setAttribute("src",e().queryUrl(y,d))})}else l&&(d=a.getAttribute("data-query-obj"),y=a.getAttribute("data-src"),c=e().queryUrl(y,d),a.setAttribute("src",c))},this.checkImages=function(){if(window.innerWidth>n+50||window.innerWidth<n-50){var t=Array.prototype.slice.call(document.body.querySelectorAll(".lazyloaded"));t.length>0&&t.map(function(t){t.classList.remove("lazyloaded"),t.classList.add("lazyload")}),n=window.innerWidth}}}});
