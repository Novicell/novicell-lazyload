"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var lazysizes=createCommonjsModule(function(t){!function(e,a){var i=function(t,e,a){var i,n;if(function(){var e,a={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};for(e in n=t.lazySizesConfig||t.lazysizesConfig||{},a)e in n||(n[e]=a[e])}(),!e||!e.getElementsByClassName)return{init:function(){},cfg:n,noSupport:!0};var r=e.documentElement,s=t.HTMLPictureElement,o=t.addEventListener.bind(t),l=t.setTimeout,c=t.requestAnimationFrame||l,u=t.requestIdleCallback,d=/^picture$/i,f=["load","error","lazyincluded","_lazyloaded"],h={},g=Array.prototype.forEach,y=function(t,e){return h[e]||(h[e]=new RegExp("(\\s|^)"+e+"(\\s|$)")),h[e].test(t.getAttribute("class")||"")&&h[e]},m=function(t,e){y(t,e)||t.setAttribute("class",(t.getAttribute("class")||"").trim()+" "+e)},v=function(t,e){var a;(a=y(t,e))&&t.setAttribute("class",(t.getAttribute("class")||"").replace(a," "))},p=function t(e,a,i){var n=i?"addEventListener":"removeEventListener";i&&t(e,a),f.forEach(function(t){e[n](t,a)})},b=function(t,a,n,r,s){var o=e.createEvent("Event");return n||(n={}),n.instance=i,o.initEvent(a,!r,!s),o.detail=n,t.dispatchEvent(o),o},A=function(e,a){var i;!s&&(i=t.picturefill||n.pf)?(a&&a.src&&!e.getAttribute("srcset")&&e.setAttribute("srcset",a.src),i({reevaluate:!0,elements:[e]})):a&&a.src&&(e.src=a.src)},z=function(t,e){return(getComputedStyle(t,null)||{})[e]},C=function(t,e,a){for(a=a||t.offsetWidth;a<n.minSize&&e&&!t._lazysizesWidth;)a=e.offsetWidth,e=e.parentNode;return a},E=(k=[],B=[],F=k,I=function(){var t=F;for(F=k.length?B:k,q=!0,j=!1;t.length;)t.shift()();q=!1},P=function(t,a){q&&!a?t.apply(this,arguments):(F.push(t),j||(j=!0,(e.hidden?l:c)(I)))},P._lsFlush=I,P),w=function(t,e){return e?function(){E(t)}:function(){var e=this,a=arguments;E(function(){t.apply(e,a)})}},W=function(t){var e,i,n=function(){e=null,t()},r=function t(){var e=a.now()-i;e<99?l(t,99-e):(u||n)(n)};return function(){i=a.now(),e||(e=l(r,99))}},N=function(){var s,f,h,C,N,_,M,x,S,R,q,j,k,B,F,I,P,T,U,H=/^img$/i,O=/^iframe$/i,D="onscroll"in t&&!/(gle|ing)bot/.test(navigator.userAgent),$=0,J=0,X=-1,G=function(t){J--,(!t||J<0||!t.target)&&(J=0)},Q=function(t){return null==j&&(j="hidden"==z(e.body,"visibility")),j||!("hidden"==z(t.parentNode,"visibility")&&"hidden"==z(t,"visibility"))},V=function(t,a){var i,n=t,s=Q(t);for(x-=a,q+=a,S-=a,R+=a;s&&(n=n.offsetParent)&&n!=e.body&&n!=r;)(s=(z(n,"opacity")||1)>0)&&"visible"!=z(n,"overflow")&&(i=n.getBoundingClientRect(),s=R>i.left&&S<i.right&&q>i.top-1&&x<i.bottom+1);return s},Y=function(){var t,a,o,l,c,u,d,h,g,y,m,v,p=i.elements;if((C=n.loadMode)&&J<8&&(t=p.length)){for(a=0,X++;a<t;a++)if(p[a]&&!p[a]._lazyRace)if(!D||i.prematureUnveil&&i.prematureUnveil(p[a]))nt(p[a]);else if((h=p[a].getAttribute("data-expand"))&&(u=1*h)||(u=$),y||(y=!n.expand||n.expand<1?r.clientHeight>500&&r.clientWidth>500?500:370:n.expand,i._defEx=y,m=y*n.expFactor,v=n.hFac,j=null,$<m&&J<1&&X>2&&C>2&&!e.hidden?($=m,X=0):$=C>1&&X>1&&J<6?y:0),g!==u&&(_=innerWidth+u*v,M=innerHeight+u,d=-1*u,g=u),o=p[a].getBoundingClientRect(),(q=o.bottom)>=d&&(x=o.top)<=M&&(R=o.right)>=d*v&&(S=o.left)<=_&&(q||R||S||x)&&(n.loadHidden||Q(p[a]))&&(f&&J<3&&!h&&(C<3||X<4)||V(p[a],u))){if(nt(p[a]),c=!0,J>9)break}else!c&&f&&!l&&J<4&&X<4&&C>2&&(s[0]||n.preloadAfterLoad)&&(s[0]||!h&&(q||R||S||x||"auto"!=p[a].getAttribute(n.sizesAttr)))&&(l=s[0]||p[a]);l&&!c&&nt(l)}},K=(k=Y,F=0,I=n.throttleDelay,P=n.ricTimeout,T=function(){B=!1,F=a.now(),k()},U=u&&P>49?function(){u(T,{timeout:P}),P!==n.ricTimeout&&(P=n.ricTimeout)}:w(function(){l(T)},!0),function(t){var e;(t=!0===t)&&(P=33),B||(B=!0,(e=I-(a.now()-F))<0&&(e=0),t||e<9?U():l(U,e))}),Z=function(t){var e=t.target;e._lazyCache?delete e._lazyCache:(G(t),m(e,n.loadedClass),v(e,n.loadingClass),p(e,et),b(e,"lazyloaded"))},tt=w(Z),et=function(t){tt({target:t.target})},at=function(t){var e,a=t.getAttribute(n.srcsetAttr);(e=n.customMedia[t.getAttribute("data-media")||t.getAttribute("media")])&&t.setAttribute("media",e),a&&t.setAttribute("srcset",a)},it=w(function(t,e,a,i,r){var s,o,c,u,f,y;(f=b(t,"lazybeforeunveil",e)).defaultPrevented||(i&&(a?m(t,n.autosizesClass):t.setAttribute("sizes",i)),o=t.getAttribute(n.srcsetAttr),s=t.getAttribute(n.srcAttr),r&&(c=t.parentNode,u=c&&d.test(c.nodeName||"")),y=e.firesLoad||"src"in t&&(o||s||u),f={target:t},m(t,n.loadingClass),y&&(clearTimeout(h),h=l(G,2500),p(t,et,!0)),u&&g.call(c.getElementsByTagName("source"),at),o?t.setAttribute("srcset",o):s&&!u&&(O.test(t.nodeName)?function(t,e){try{t.contentWindow.location.replace(e)}catch(a){t.src=e}}(t,s):t.src=s),r&&(o||u)&&A(t,{src:s})),t._lazyRace&&delete t._lazyRace,v(t,n.lazyClass),E(function(){var e=t.complete&&t.naturalWidth>1;y&&!e||(e&&m(t,"ls-is-cached"),Z(f),t._lazyCache=!0,l(function(){"_lazyCache"in t&&delete t._lazyCache},9)),"lazy"==t.loading&&J--},!0)}),nt=function(t){if(!t._lazyRace){var e,a=H.test(t.nodeName),i=a&&(t.getAttribute(n.sizesAttr)||t.getAttribute("sizes")),r="auto"==i;(!r&&f||!a||!t.getAttribute("src")&&!t.srcset||t.complete||y(t,n.errorClass)||!y(t,n.lazyClass))&&(e=b(t,"lazyunveilread").detail,r&&L.updateElem(t,!0,t.offsetWidth),t._lazyRace=!0,J++,it(t,e,r,i,a))}},rt=W(function(){n.loadMode=3,K()}),st=function(){3==n.loadMode&&(n.loadMode=2),rt()},ot=function t(){f||(a.now()-N<999?l(t,999):(f=!0,n.loadMode=3,K(),o("scroll",st,!0)))};return{_:function(){N=a.now(),i.elements=e.getElementsByClassName(n.lazyClass),s=e.getElementsByClassName(n.lazyClass+" "+n.preloadClass),o("scroll",K,!0),o("resize",K,!0),o("pageshow",function(t){if(t.persisted){var a=e.querySelectorAll("."+n.loadingClass);a.length&&a.forEach&&c(function(){a.forEach(function(t){t.complete&&nt(t)})})}}),t.MutationObserver?new MutationObserver(K).observe(r,{childList:!0,subtree:!0,attributes:!0}):(r.addEventListener("DOMNodeInserted",K,!0),r.addEventListener("DOMAttrModified",K,!0),setInterval(K,999)),o("hashchange",K,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(t){e.addEventListener(t,K,!0)}),/d$|^c/.test(e.readyState)?ot():(o("load",ot),e.addEventListener("DOMContentLoaded",K),l(ot,2e4)),i.elements.length?(Y(),E._lsFlush()):K()},checkElems:K,unveil:nt,_aLSL:st}}(),L=(x=w(function(t,e,a,i){var n,r,s;if(t._lazysizesWidth=i,i+="px",t.setAttribute("sizes",i),d.test(e.nodeName||""))for(n=e.getElementsByTagName("source"),r=0,s=n.length;r<s;r++)n[r].setAttribute("sizes",i);a.detail.dataAttr||A(t,a.detail)}),S=function(t,e,a){var i,n=t.parentNode;n&&(a=C(t,n,a),(i=b(t,"lazybeforesizes",{width:a,dataAttr:!!e})).defaultPrevented||(a=i.detail.width)&&a!==t._lazysizesWidth&&x(t,n,i,a))},R=W(function(){var t,e=M.length;if(e)for(t=0;t<e;t++)S(M[t])}),{_:function(){M=e.getElementsByClassName(n.autosizesClass),o("resize",R)},checkElems:R,updateElem:S}),_=function t(){!t.i&&e.getElementsByClassName&&(t.i=!0,L._(),N._())};var M,x,S,R;var q,j,k,B,F,I,P;return l(function(){n.init&&_()}),i={cfg:n,autoSizer:L,loader:N,init:_,uP:A,aC:m,rC:v,hC:y,fire:b,gW:C,rAF:E}}(e,e.document,Date);e.lazySizes=i,t.exports&&(t.exports=i)}("undefined"!=typeof window?window:{})}),dynamicImage=function(){function t(t){return t.indexOf("?")>-1?"&":"?"}function e(e,a){if(a){var i=JSON.parse(a);Object.keys(i).forEach(function(a){e+=null!==i[a]?t(e)+a+"="+i[a]:""})}return e}return{queryUrl:e,getUrl:function(a){var i=a.getAttribute("data-src"),n=a.getAttribute("data-height-ratio"),r=a.parentNode.innerWidth||a.parentNode.offsetWidth;if(r=null!==r?r+50-r%50:null,!n){var s=a.parentNode.innerHeight||a.parentNode.offsetHeight;n=(s=null!==s?s+50-s%50:null)/r}var o=r,l=o*n;return i+=o?t(i)+"width="+o:"",i=e(i+=null!==l?t(i)+"height="+l:"",a.getAttribute("data-query-obj"))}}},lastRefreshWidth=0,refreshWidth=50,NovicellLazyLoad=function t(e){var a=e.includeWebp,i=void 0===a||a;_classCallCheck(this,t),this.includeWebp=i,this.lazyLoad=function(t){t.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})};var e=this.includeWebp,a=t.target,i=a.classList.contains("lazyload-measure")||a.classList.contains("lazyload-bg"),n=a.classList.contains("lazyload-measure"),r=a.hasAttribute("data-srcset")&&a.hasAttribute("data-query-obj"),s=a.hasAttribute("data-src")&&a.hasAttribute("data-query-obj");if(i&&t.preventDefault(),n){var o=a.classList.contains("lazyload-bg"),l=dynamicImage().getUrl(a);isSupportWebP(function(t){t&&e&&(l=addFormat(l)),o?(a.parentNode.style.backgroundImage="url(".concat(l,")"),a.style.visibility="hidden"):a.src=l})}else if(r){var c=a.getAttribute("data-query-obj"),u=a.getAttribute("data-srcset").split(","),d=a.getAttribute("data-src"),f=[];isSupportWebP(function(t){u.forEach(function(a){var i=(a=(a=a.trim()).split(" "))[0],n=a[1],r=dynamicImage().queryUrl(i,c);t&&e&&(r=addFormat(r)),f.push(r+" "+n)}),a.setAttribute("srcset",f.join(", ")),a.setAttribute("src",dynamicImage().queryUrl(d,c))})}else if(s){var h=a.getAttribute("data-query-obj"),g=a.getAttribute("data-src"),y=dynamicImage().queryUrl(g,h);a.setAttribute("src",y)}},this.checkImages=function(){if(window.innerWidth>lastRefreshWidth+refreshWidth||window.innerWidth<lastRefreshWidth-refreshWidth){var t=Array.prototype.slice.call(document.body.querySelectorAll(".lazyloaded"));t.length>0&&t.map(function(t){t.classList.remove("lazyloaded"),t.classList.add("lazyload")}),lastRefreshWidth=window.innerWidth}}};function isSupportWebP(t){var e=new Image;e.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",e.onload=e.onerror=function(){t(2===e.height)}}function addFormat(t){if(t.includes("format="))return t;var e=t.split("?");return"".concat(e[0],"?format=webp&").concat(e[1])}module.exports=NovicellLazyLoad;
