(function(rt,O){typeof exports=="object"&&typeof module<"u"?module.exports=O():typeof define=="function"&&define.amd?define(O):(rt=typeof globalThis<"u"?globalThis:rt||self,rt.LazyImages=O())})(this,function(){"use strict";var rt={exports:{}};(function(L){(function(h,f){var a=f(h,h.document,Date);h.lazySizes=a,L.exports&&(L.exports=a)})(typeof window<"u"?window:{},function(f,a,v){var u,t;if(function(){var i,r={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};t=f.lazySizesConfig||f.lazysizesConfig||{};for(i in r)i in t||(t[i]=r[i])}(),!a||!a.getElementsByClassName)return{init:function(){},cfg:t,noSupport:!0};var W=a.documentElement,F=f.HTMLPictureElement,I="addEventListener",b="getAttribute",C=f[I].bind(f),o=f.setTimeout,U=f.requestAnimationFrame||o,A=f.requestIdleCallback,N=/^picture$/i,E=["load","error","lazyincluded","_lazyloaded"],S={},Y=Array.prototype.forEach,q=function(i,r){return S[r]||(S[r]=new RegExp("(\\s|^)"+r+"(\\s|$)")),S[r].test(i[b]("class")||"")&&S[r]},P=function(i,r){q(i,r)||i.setAttribute("class",(i[b]("class")||"").trim()+" "+r)},K=function(i,r){var s;(s=q(i,r))&&i.setAttribute("class",(i[b]("class")||"").replace(s," "))},Z=function(i,r,s){var y=s?I:"removeEventListener";s&&Z(i,r),E.forEach(function(p){i[y](p,r)})},J=function(i,r,s,y,p){var l=a.createEvent("Event");return s||(s={}),s.instance=u,l.initEvent(r,!y,!p),l.detail=s,i.dispatchEvent(l),l},it=function(i,r){var s;!F&&(s=f.picturefill||t.pf)?(r&&r.src&&!i[b]("srcset")&&i.setAttribute("srcset",r.src),s({reevaluate:!0,elements:[i]})):r&&r.src&&(i.src=r.src)},Q=function(i,r){return(getComputedStyle(i,null)||{})[r]},pt=function(i,r,s){for(s=s||i.offsetWidth;s<t.minSize&&r&&!i._lazysizesWidth;)s=r.offsetWidth,r=r.parentNode;return s},at=function(){var i,r,s=[],y=[],p=s,l=function(){var c=p;for(p=s.length?y:s,i=!0,r=!1;c.length;)c.shift()();i=!1},z=function(c,g){i&&!g?c.apply(this,arguments):(p.push(c),r||(r=!0,(a.hidden?o:U)(l)))};return z._lsFlush=l,z}(),lt=function(i,r){return r?function(){at(i)}:function(){var s=this,y=arguments;at(function(){i.apply(s,y)})}},Lt=function(i){var r,s=0,y=t.throttleDelay,p=t.ricTimeout,l=function(){r=!1,s=v.now(),i()},z=A&&p>49?function(){A(l,{timeout:p}),p!==t.ricTimeout&&(p=t.ricTimeout)}:lt(function(){o(l)},!0);return function(c){var g;(c=c===!0)&&(p=33),!r&&(r=!0,g=y-(v.now()-s),g<0&&(g=0),c||g<9?z():o(z,g))}},yt=function(i){var r,s,y=99,p=function(){r=null,i()},l=function(){var z=v.now()-s;z<y?o(l,y-z):(A||p)(p)};return function(){s=v.now(),r||(r=o(l,y))}},bt=function(){var i,r,s,y,p,l,z,c,g,R,w,X,Wt=/^img$/i,Nt=/^iframe$/i,$t="onscroll"in f&&!/(gle|ing)bot/.test(navigator.userAgent),Rt=0,nt=0,k=0,tt=-1,zt=function(e){k--,(!e||k<0||!e.target)&&(k=0)},At=function(e){return X==null&&(X=Q(a.body,"visibility")=="hidden"),X||!(Q(e.parentNode,"visibility")=="hidden"&&Q(e,"visibility")=="hidden")},_t=function(e,n){var d,m=e,x=At(e);for(c-=n,w+=n,g-=n,R+=n;x&&(m=m.offsetParent)&&m!=a.body&&m!=W;)x=(Q(m,"opacity")||1)>0,x&&Q(m,"overflow")!="visible"&&(d=m.getBoundingClientRect(),x=R>d.left&&g<d.right&&w>d.top-1&&c<d.bottom+1);return x},mt=function(){var e,n,d,m,x,$,T,B,D,j,G,et,M=u.elements;if((y=t.loadMode)&&k<8&&(e=M.length)){for(n=0,tt++;n<e;n++)if(!(!M[n]||M[n]._lazyRace)){if(!$t||u.prematureUnveil&&u.prematureUnveil(M[n])){st(M[n]);continue}if((!(B=M[n][b]("data-expand"))||!($=B*1))&&($=nt),j||(j=!t.expand||t.expand<1?W.clientHeight>500&&W.clientWidth>500?500:370:t.expand,u._defEx=j,G=j*t.expFactor,et=t.hFac,X=null,nt<G&&k<1&&tt>2&&y>2&&!a.hidden?(nt=G,tt=0):y>1&&tt>1&&k<6?nt=j:nt=Rt),D!==$&&(l=innerWidth+$*et,z=innerHeight+$,T=$*-1,D=$),d=M[n].getBoundingClientRect(),(w=d.bottom)>=T&&(c=d.top)<=z&&(R=d.right)>=T*et&&(g=d.left)<=l&&(w||R||g||c)&&(t.loadHidden||At(M[n]))&&(r&&k<3&&!B&&(y<3||tt<4)||_t(M[n],$))){if(st(M[n]),x=!0,k>9)break}else!x&&r&&!m&&k<4&&tt<4&&y>2&&(i[0]||t.preloadAfterLoad)&&(i[0]||!B&&(w||R||g||c||M[n][b](t.sizesAttr)!="auto"))&&(m=i[0]||M[n])}m&&!x&&st(m)}},_=Lt(mt),Ct=function(e){var n=e.target;if(n._lazyCache){delete n._lazyCache;return}zt(e),P(n,t.loadedClass),K(n,t.loadingClass),Z(n,Et),J(n,"lazyloaded")},It=lt(Ct),Et=function(e){It({target:e.target})},Mt=function(e,n){try{e.contentWindow.location.replace(n)}catch{e.src=n}},Ut=function(e){var n,d=e[b](t.srcsetAttr);(n=t.customMedia[e[b]("data-media")||e[b]("media")])&&e.setAttribute("media",n),d&&e.setAttribute("srcset",d)},kt=lt(function(e,n,d,m,x){var $,T,B,D,j,G;(j=J(e,"lazybeforeunveil",n)).defaultPrevented||(m&&(d?P(e,t.autosizesClass):e.setAttribute("sizes",m)),T=e[b](t.srcsetAttr),$=e[b](t.srcAttr),x&&(B=e.parentNode,D=B&&N.test(B.nodeName||"")),G=n.firesLoad||"src"in e&&(T||$||D),j={target:e},P(e,t.loadingClass),G&&(clearTimeout(s),s=o(zt,2500),Z(e,Et,!0)),D&&Y.call(B.getElementsByTagName("source"),Ut),T?e.setAttribute("srcset",T):$&&!D&&(Nt.test(e.nodeName)?Mt(e,$):e.src=$),x&&(T||D)&&it(e,{src:$})),e._lazyRace&&delete e._lazyRace,K(e,t.lazyClass),at(function(){var et=e.complete&&e.naturalWidth>1;(!G||et)&&(et&&P(e,"ls-is-cached"),Ct(j),e._lazyCache=!0,o(function(){"_lazyCache"in e&&delete e._lazyCache},9)),e.loading=="lazy"&&k--},!0)}),st=function(e){if(!e._lazyRace){var n,d=Wt.test(e.nodeName),m=d&&(e[b](t.sizesAttr)||e[b]("sizes")),x=m=="auto";(x||!r)&&d&&(e[b]("src")||e.srcset)&&!e.complete&&!q(e,t.errorClass)&&q(e,t.lazyClass)||(n=J(e,"lazyunveilread").detail,x&&ft.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,k++,kt(e,n,x,m,d))}},qt=yt(function(){t.loadMode=3,_()}),St=function(){t.loadMode==3&&(t.loadMode=2),qt()},ct=function(){if(!r){if(v.now()-p<999){o(ct,999);return}r=!0,t.loadMode=3,_(),C("scroll",St,!0)}};return{_:function(){p=v.now(),u.elements=a.getElementsByClassName(t.lazyClass),i=a.getElementsByClassName(t.lazyClass+" "+t.preloadClass),C("scroll",_,!0),C("resize",_,!0),C("pageshow",function(e){if(e.persisted){var n=a.querySelectorAll("."+t.loadingClass);n.length&&n.forEach&&U(function(){n.forEach(function(d){d.complete&&st(d)})})}}),f.MutationObserver?new MutationObserver(_).observe(W,{childList:!0,subtree:!0,attributes:!0}):(W[I]("DOMNodeInserted",_,!0),W[I]("DOMAttrModified",_,!0),setInterval(_,999)),C("hashchange",_,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){a[I](e,_,!0)}),/d$|^c/.test(a.readyState)?ct():(C("load",ct),a[I]("DOMContentLoaded",_),o(ct,2e4)),u.elements.length?(mt(),at._lsFlush()):_()},checkElems:_,unveil:st,_aLSL:St}}(),ft=function(){var i,r=lt(function(l,z,c,g){var R,w,X;if(l._lazysizesWidth=g,g+="px",l.setAttribute("sizes",g),N.test(z.nodeName||""))for(R=z.getElementsByTagName("source"),w=0,X=R.length;w<X;w++)R[w].setAttribute("sizes",g);c.detail.dataAttr||it(l,c.detail)}),s=function(l,z,c){var g,R=l.parentNode;R&&(c=pt(l,R,c),g=J(l,"lazybeforesizes",{width:c,dataAttr:!!z}),g.defaultPrevented||(c=g.detail.width,c&&c!==l._lazysizesWidth&&r(l,R,g,c)))},y=function(){var l,z=i.length;if(z)for(l=0;l<z;l++)s(i[l])},p=yt(y);return{_:function(){i=a.getElementsByClassName(t.autosizesClass),C("resize",p)},checkElems:p,updateElem:s}}(),ut=function(){!ut.i&&a.getElementsByClassName&&(ut.i=!0,ft._(),bt._())};return o(function(){t.init&&ut()}),u={cfg:t,autoSizer:ft,loader:bt,init:ut,uP:it,aC:P,rC:K,hC:q,fire:J,gW:pt,rAF:at},u})})(rt);const O=function(){function L(a){let u=a.getAttribute("data-src"),t=a.getAttribute("data-height-ratio"),W=a.parentNode.innerWidth||a.parentNode.offsetWidth;if(W=W!==null?W+50-W%50:null,!t){var F=a.parentNode.innerHeight||a.parentNode.offsetHeight;F=F!==null?F+50-F%50:null,t=F/W}let I=W,b=I*t;u+=I?h(u)+"width="+I:"",u+=b!==null?h(u)+"height="+b:"";const C=a.getAttribute("data-query-obj");return u=f(u,C),u}function h(a){return a.indexOf("?")>-1?"&":"?"}function f(a,v){if(v){const u=JSON.parse(v);Object.keys(u).forEach(function(t){a+=u[t]!==null?h(a)+t+"="+u[t]:""})}return a}return{queryUrl:f,getUrl:L}};let dt=0;const vt=50,H=window.devicePixelRatio;class xt{constructor({includeWebp:h=!0,includeRetina:f=!0}){this.includeWebp=h,this.includeRetina=f,this.lazyLoad=function(a){a.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})};const v=this.includeWebp,u=this.includeRetina,t=a.target,W=t.classList.contains("lazyload-measure")||t.classList.contains("lazyload-bg"),F=t.classList.contains("lazyload-measure"),I=t.hasAttribute("data-srcset")&&t.hasAttribute("data-query-obj"),b=t.hasAttribute("data-src")&&t.hasAttribute("data-query-obj");if(W&&a.preventDefault(),F){const C=t.classList.contains("lazyload-bg");let o=O().getUrl(t);gt(function(U){if(U&&v&&(o=ht(o)),C&&u){const{orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S}=ot(o);t.parentNode.style.backgroundImage=`url(${o})`,window.CSS.supports("background-image",`-webkit-image-set( url(${o}) 1x, url(${V({url:o,orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S})}) ${H}x)`)&&(t.parentNode.style.backgroundImage=`-webkit-image-set( url(${o}) 1x, url(${V({url:o,orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S})}) ${H}x)`),window.CSS.supports("background-image",`image-set(url("${o}") 1x, url(${V({url:o,orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S})}) ${H}x)`)&&(t.parentNode.style.backgroundImage=`image-set(url("${o}") 1x, url(${V({url:o,orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S})}) ${H}x)`),t.style.visibility="hidden"}else if(C)t.parentNode.style.backgroundImage=`url(${o})`,t.style.visibility="hidden";else if(t.src=o,u){const{orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S}=ot(o);(A||N)&&t.setAttribute("srcset",`${o} 1x, ${V({url:o,orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S})} ${H}x`)}})}else if(I){const C=t.getAttribute("data-query-obj"),o=t.getAttribute("data-srcset").split(","),U=t.getAttribute("data-src"),A=[];gt(function(N){o.forEach(function(E){E=E.trim(),E=E.split(" ");let S=E[0];const Y=E[1];let q=O().queryUrl(S,C);if(N&&v&&(q=ht(q)),A.push(q+" "+Y),u){const P=Y.match(/\d+/g),{orgWidth:K,orgHeight:Z,retinaHeight:J,retinaWidth:it}=ot(q),Q=P?Y.replace(P,(Number(P)*H).toString()):Y;(K||Z)&&A.push(`${V({url:S,orgWidth:K,orgHeight:Z,retinaHeight:J,retinaWidth:it})} ${Q}`)}}),t.setAttribute("srcset",A.join(", ")),t.setAttribute("src",O().queryUrl(U,C))})}else if(b){const C=t.getAttribute("data-query-obj"),o=t.getAttribute("data-src"),U=O().queryUrl(o,C);if(u){const{orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S}=ot(U);(A||N)&&t.setAttribute("srcset",`${U} 1x, ${V({url:U,orgWidth:A,orgHeight:N,retinaHeight:E,retinaWidth:S})} ${H}x`)}t.setAttribute("src",U)}},this.checkImages=function(){if(window.innerWidth>dt+vt||window.innerWidth<dt-vt){let a=Array.prototype.slice.call(document.body.querySelectorAll(".lazyloaded"));a.length>0&&a.map(function(v){v.classList.remove("lazyloaded"),v.classList.add("lazyload")}),dt=window.innerWidth}}}}function gt(L){const h=new Image;h.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",h.onload=h.onerror=function(){L(h.height===2)}}function ot(L){const h=new URL(L);let f=new URLSearchParams(h.search);const a=f.get("width"),v=f.get("height"),u=a&&(Number(a)*H).toString(),t=v&&(Number(v)*H).toString();return{orgWidth:a,orgHeight:v,retinaWidth:u,retinaHeight:t}}function V({url:L,orgWidth:h,orgHeight:f,retinaHeight:a,retinaWidth:v}){return L.replace(h,v).replace(f,a)}function ht(L){if(L.includes("format="))return L;const h=L.split("?");return`${h[0]}?format=webp&${h[1]}`}return xt});
