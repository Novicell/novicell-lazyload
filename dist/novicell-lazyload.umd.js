(function(rt,O){typeof exports=="object"&&typeof module<"u"?module.exports=O():typeof define=="function"&&define.amd?define(O):(rt=typeof globalThis<"u"?globalThis:rt||self,rt.LazyImages=O())})(this,function(){"use strict";var rt={exports:{}};(function(L){(function(v,d){var a=d(v,v.document,Date);v.lazySizes=a,L.exports&&(L.exports=a)})(typeof window<"u"?window:{},function(d,a,g){var u,t;if(function(){var i,r={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2,loadHidden:!0,ricTimeout:0,throttleDelay:125};t=d.lazySizesConfig||d.lazysizesConfig||{};for(i in r)i in t||(t[i]=r[i])}(),!a||!a.getElementsByClassName)return{init:function(){},cfg:t,noSupport:!0};var N=a.documentElement,P=d.HTMLPictureElement,w="addEventListener",b="getAttribute",C=d[w].bind(d),o=d.setTimeout,U=d.requestAnimationFrame||o,m=d.requestIdleCallback,W=/^picture$/i,E=["load","error","lazyincluded","_lazyloaded"],S={},Y=Array.prototype.forEach,q=function(i,r){return S[r]||(S[r]=new RegExp("(\\s|^)"+r+"(\\s|$)")),S[r].test(i[b]("class")||"")&&S[r]},F=function(i,r){q(i,r)||i.setAttribute("class",(i[b]("class")||"").trim()+" "+r)},K=function(i,r){var s;(s=q(i,r))&&i.setAttribute("class",(i[b]("class")||"").replace(s," "))},Z=function(i,r,s){var y=s?w:"removeEventListener";s&&Z(i,r),E.forEach(function(p){i[y](p,r)})},J=function(i,r,s,y,p){var l=a.createEvent("Event");return s||(s={}),s.instance=u,l.initEvent(r,!y,!p),l.detail=s,i.dispatchEvent(l),l},it=function(i,r){var s;!P&&(s=d.picturefill||t.pf)?(r&&r.src&&!i[b]("srcset")&&i.setAttribute("srcset",r.src),s({reevaluate:!0,elements:[i]})):r&&r.src&&(i.src=r.src)},Q=function(i,r){return(getComputedStyle(i,null)||{})[r]},pt=function(i,r,s){for(s=s||i.offsetWidth;s<t.minSize&&r&&!i._lazysizesWidth;)s=r.offsetWidth,r=r.parentNode;return s},at=function(){var i,r,s=[],y=[],p=s,l=function(){var c=p;for(p=s.length?y:s,i=!0,r=!1;c.length;)c.shift()();i=!1},z=function(c,h){i&&!h?c.apply(this,arguments):(p.push(c),r||(r=!0,(a.hidden?o:U)(l)))};return z._lsFlush=l,z}(),lt=function(i,r){return r?function(){at(i)}:function(){var s=this,y=arguments;at(function(){i.apply(s,y)})}},Lt=function(i){var r,s=0,y=t.throttleDelay,p=t.ricTimeout,l=function(){r=!1,s=g.now(),i()},z=m&&p>49?function(){m(l,{timeout:p}),p!==t.ricTimeout&&(p=t.ricTimeout)}:lt(function(){o(l)},!0);return function(c){var h;(c=c===!0)&&(p=33),!r&&(r=!0,h=y-(g.now()-s),h<0&&(h=0),c||h<9?z():o(z,h))}},yt=function(i){var r,s,y=99,p=function(){r=null,i()},l=function(){var z=g.now()-s;z<y?o(l,y-z):(m||p)(p)};return function(){s=g.now(),r||(r=o(l,y))}},bt=function(){var i,r,s,y,p,l,z,c,h,R,H,X,Nt=/^img$/i,Wt=/^iframe$/i,$t="onscroll"in d&&!/(gle|ing)bot/.test(navigator.userAgent),Rt=0,nt=0,M=0,tt=-1,zt=function(e){M--,(!e||M<0||!e.target)&&(M=0)},mt=function(e){return X==null&&(X=Q(a.body,"visibility")=="hidden"),X||!(Q(e.parentNode,"visibility")=="hidden"&&Q(e,"visibility")=="hidden")},_t=function(e,n){var f,A=e,x=mt(e);for(c-=n,H+=n,h-=n,R+=n;x&&(A=A.offsetParent)&&A!=a.body&&A!=N;)x=(Q(A,"opacity")||1)>0,x&&Q(A,"overflow")!="visible"&&(f=A.getBoundingClientRect(),x=R>f.left&&h<f.right&&H>f.top-1&&c<f.bottom+1);return x},At=function(){var e,n,f,A,x,$,T,B,D,j,G,et,I=u.elements;if((y=t.loadMode)&&M<8&&(e=I.length)){for(n=0,tt++;n<e;n++)if(!(!I[n]||I[n]._lazyRace)){if(!$t||u.prematureUnveil&&u.prematureUnveil(I[n])){st(I[n]);continue}if((!(B=I[n][b]("data-expand"))||!($=B*1))&&($=nt),j||(j=!t.expand||t.expand<1?N.clientHeight>500&&N.clientWidth>500?500:370:t.expand,u._defEx=j,G=j*t.expFactor,et=t.hFac,X=null,nt<G&&M<1&&tt>2&&y>2&&!a.hidden?(nt=G,tt=0):y>1&&tt>1&&M<6?nt=j:nt=Rt),D!==$&&(l=innerWidth+$*et,z=innerHeight+$,T=$*-1,D=$),f=I[n].getBoundingClientRect(),(H=f.bottom)>=T&&(c=f.top)<=z&&(R=f.right)>=T*et&&(h=f.left)<=l&&(H||R||h||c)&&(t.loadHidden||mt(I[n]))&&(r&&M<3&&!B&&(y<3||tt<4)||_t(I[n],$))){if(st(I[n]),x=!0,M>9)break}else!x&&r&&!A&&M<4&&tt<4&&y>2&&(i[0]||t.preloadAfterLoad)&&(i[0]||!B&&(H||R||h||c||I[n][b](t.sizesAttr)!="auto"))&&(A=i[0]||I[n])}A&&!x&&st(A)}},_=Lt(At),Ct=function(e){var n=e.target;if(n._lazyCache){delete n._lazyCache;return}zt(e),F(n,t.loadedClass),K(n,t.loadingClass),Z(n,Et),J(n,"lazyloaded")},wt=lt(Ct),Et=function(e){wt({target:e.target})},It=function(e,n){try{e.contentWindow.location.replace(n)}catch{e.src=n}},Ut=function(e){var n,f=e[b](t.srcsetAttr);(n=t.customMedia[e[b]("data-media")||e[b]("media")])&&e.setAttribute("media",n),f&&e.setAttribute("srcset",f)},Mt=lt(function(e,n,f,A,x){var $,T,B,D,j,G;(j=J(e,"lazybeforeunveil",n)).defaultPrevented||(A&&(f?F(e,t.autosizesClass):e.setAttribute("sizes",A)),T=e[b](t.srcsetAttr),$=e[b](t.srcAttr),x&&(B=e.parentNode,D=B&&W.test(B.nodeName||"")),G=n.firesLoad||"src"in e&&(T||$||D),j={target:e},F(e,t.loadingClass),G&&(clearTimeout(s),s=o(zt,2500),Z(e,Et,!0)),D&&Y.call(B.getElementsByTagName("source"),Ut),T?e.setAttribute("srcset",T):$&&!D&&(Wt.test(e.nodeName)?It(e,$):e.src=$),x&&(T||D)&&it(e,{src:$})),e._lazyRace&&delete e._lazyRace,K(e,t.lazyClass),at(function(){var et=e.complete&&e.naturalWidth>1;(!G||et)&&(et&&F(e,"ls-is-cached"),Ct(j),e._lazyCache=!0,o(function(){"_lazyCache"in e&&delete e._lazyCache},9)),e.loading=="lazy"&&M--},!0)}),st=function(e){if(!e._lazyRace){var n,f=Nt.test(e.nodeName),A=f&&(e[b](t.sizesAttr)||e[b]("sizes")),x=A=="auto";(x||!r)&&f&&(e[b]("src")||e.srcset)&&!e.complete&&!q(e,t.errorClass)&&q(e,t.lazyClass)||(n=J(e,"lazyunveilread").detail,x&&ft.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,M++,Mt(e,n,x,A,f))}},kt=yt(function(){t.loadMode=3,_()}),St=function(){t.loadMode==3&&(t.loadMode=2),kt()},ct=function(){if(!r){if(g.now()-p<999){o(ct,999);return}r=!0,t.loadMode=3,_(),C("scroll",St,!0)}};return{_:function(){p=g.now(),u.elements=a.getElementsByClassName(t.lazyClass),i=a.getElementsByClassName(t.lazyClass+" "+t.preloadClass),C("scroll",_,!0),C("resize",_,!0),C("pageshow",function(e){if(e.persisted){var n=a.querySelectorAll("."+t.loadingClass);n.length&&n.forEach&&U(function(){n.forEach(function(f){f.complete&&st(f)})})}}),d.MutationObserver?new MutationObserver(_).observe(N,{childList:!0,subtree:!0,attributes:!0}):(N[w]("DOMNodeInserted",_,!0),N[w]("DOMAttrModified",_,!0),setInterval(_,999)),C("hashchange",_,!0),["focus","mouseover","click","load","transitionend","animationend"].forEach(function(e){a[w](e,_,!0)}),/d$|^c/.test(a.readyState)?ct():(C("load",ct),a[w]("DOMContentLoaded",_),o(ct,2e4)),u.elements.length?(At(),at._lsFlush()):_()},checkElems:_,unveil:st,_aLSL:St}}(),ft=function(){var i,r=lt(function(l,z,c,h){var R,H,X;if(l._lazysizesWidth=h,h+="px",l.setAttribute("sizes",h),W.test(z.nodeName||""))for(R=z.getElementsByTagName("source"),H=0,X=R.length;H<X;H++)R[H].setAttribute("sizes",h);c.detail.dataAttr||it(l,c.detail)}),s=function(l,z,c){var h,R=l.parentNode;R&&(c=pt(l,R,c),h=J(l,"lazybeforesizes",{width:c,dataAttr:!!z}),h.defaultPrevented||(c=h.detail.width,c&&c!==l._lazysizesWidth&&r(l,R,h,c)))},y=function(){var l,z=i.length;if(z)for(l=0;l<z;l++)s(i[l])},p=yt(y);return{_:function(){i=a.getElementsByClassName(t.autosizesClass),C("resize",p)},checkElems:p,updateElem:s}}(),ut=function(){!ut.i&&a.getElementsByClassName&&(ut.i=!0,ft._(),bt._())};return o(function(){t.init&&ut()}),u={cfg:t,autoSizer:ft,loader:bt,init:ut,uP:it,aC:F,rC:K,hC:q,fire:J,gW:pt,rAF:at},u})})(rt);const O=function(){function L(a){let u=a.getAttribute("data-src"),t=a.getAttribute("data-height-ratio"),N=a.parentNode.innerWidth||a.parentNode.offsetWidth;if(N=N!==null?N+50-N%50:null,!t){var P=a.parentNode.innerHeight||a.parentNode.offsetHeight;P=P!==null?P+50-P%50:null,t=P/N}let w=N,b=w*t;u+=w?v(u)+"width="+w:"",u+=b!==null?v(u)+"height="+b:"";const C=a.getAttribute("data-query-obj");return u=d(u,C),u}function v(a){return a.indexOf("?")>-1?"&":"?"}function d(a,g){if(g){const u=JSON.parse(g);Object.keys(u).forEach(function(t){a+=u[t]!==null?v(a)+t+"="+u[t]:""})}return a}return{queryUrl:d,getUrl:L}};let dt=0;const vt=50,k=window.devicePixelRatio;class xt{constructor({includeWebp:v=!0,includeRetina:d=!0}){this.includeWebp=v,this.includeRetina=d,this.lazyLoad=function(a){a.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})};const g=this.includeWebp,u=this.includeRetina&&k>1,t=a.target,N=t.classList.contains("lazyload-measure")||t.classList.contains("lazyload-bg"),P=t.classList.contains("lazyload-measure"),w=t.hasAttribute("data-srcset")&&t.hasAttribute("data-query-obj"),b=t.hasAttribute("data-src")&&t.hasAttribute("data-query-obj");if(N&&a.preventDefault(),P){const C=t.classList.contains("lazyload-bg");let o=O().getUrl(t);gt(function(U){if(U&&g&&(o=ht(o)),C&&u){const{orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S}=ot(o);t.parentNode.style.backgroundImage=`url(${o})`,window.CSS.supports("background-image",`-webkit-image-set( url(${o}) 1x, url(${V({url:o,orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S})}) ${k}x)`)&&(t.parentNode.style.backgroundImage=`-webkit-image-set( url(${o}) 1x, url(${V({url:o,orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S})}) ${k}x)`),window.CSS.supports("background-image",`image-set(url("${o}") 1x, url(${V({url:o,orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S})}) ${k}x)`)&&(t.parentNode.style.backgroundImage=`image-set(url("${o}") 1x, url(${V({url:o,orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S})}) ${k}x)`),t.style.visibility="hidden"}else if(C)t.parentNode.style.backgroundImage=`url(${o})`,t.style.visibility="hidden";else if(t.src=o,u){const{orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S}=ot(o);(m||W)&&t.setAttribute("srcset",`${o} 1x, ${V({url:o,orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S})} ${k}x`)}})}else if(w){const C=t.getAttribute("data-query-obj"),o=t.getAttribute("data-srcset").split(","),U=t.getAttribute("data-src"),m=[];gt(function(W){o.forEach(function(E){E=E.trim(),E=E.split(" ");let S=E[0];const Y=E[1];let q=O().queryUrl(S,C);if(W&&g&&(q=ht(q)),m.push(q+" "+Y),u){const F=Y.match(/\d+/g),{orgWidth:K,orgHeight:Z,retinaHeight:J,retinaWidth:it}=ot(q),Q=typeof Number(F)=="number"?Y.replace(F,(Number(F)*k).toString()):Y;(K||Z)&&m.push(`${V({url:S,orgWidth:K,orgHeight:Z,retinaHeight:J,retinaWidth:it})} ${Q}`)}}),t.setAttribute("srcset",m.join(", ")),t.setAttribute("src",O().queryUrl(U,C))})}else if(b){const C=t.getAttribute("data-query-obj"),o=t.getAttribute("data-src"),U=O().queryUrl(o,C);if(u){const{orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S}=ot(U);(m||W)&&t.setAttribute("srcset",`${U} 1x, ${V({url:U,orgWidth:m,orgHeight:W,retinaHeight:E,retinaWidth:S})} ${k}x`)}t.setAttribute("src",U)}},this.checkImages=function(){if(window.innerWidth>dt+vt||window.innerWidth<dt-vt){let a=Array.prototype.slice.call(document.body.querySelectorAll(".lazyloaded"));a.length>0&&a.map(function(g){g.classList.remove("lazyloaded"),g.classList.add("lazyload")}),dt=window.innerWidth}}}}function gt(L){const v=new Image;v.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",v.onload=v.onerror=function(){L(v.height===2)}}function ot(L){let v="",d=new URLSearchParams("");try{v=new URL(L),d=new URLSearchParams(v.search)}catch{}const a=d.get("width"),g=d.get("height"),u=typeof Number(a)=="number"?(Number(a)*k).toString():a,t=typeof Number(g)=="number"?(Number(g)*k).toString():g;return{orgWidth:a,orgHeight:g,retinaWidth:u,retinaHeight:t}}function V({url:L,orgWidth:v,orgHeight:d,retinaHeight:a,retinaWidth:g}){return L.replace(`width=${v}`,`width=${g}`).replace(`height=${d}`,`height=${a}`)}function ht(L){if(L.includes("format="))return L;const v=L.split("?");return`${v[0]}?format=webp&${v[1]}`}return xt});
